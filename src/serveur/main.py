#!/usr/bin/env python
# coding: utf-8
import sys
from Serveur import MyServer
import time
import os
import imp
forme = imp.load_source('Forme', '../classes/forme.py')
joueur = imp.load_source('Joueur', '../classes/joueur.py')
carte = imp.load_source('Carte', '../classes/carte.py')
import random
from PodSixNet.Channel import Channel
from PodSixNet.Server import Server
import time,sys

MAP =  {0 :[0,0,0,0,0,0,0,0,0,0],
        1 :[0,0,0,0,0,0,0,0,0,0],
        2 :[0,0,0,0,0,0,0,0,0,0],
        3 :[0,0,0,0,0,0,0,0,0,0],
        4 :[0,0,0,0,0,0,0,0,0,0],
        5 :[0,0,0,0,0,0,0,0,0,0],
        6 :[0,0,0,0,0,0,0,0,0,0],
        7 :[0,0,0,0,0,0,0,0,0,0],
        8 :[0,0,0,0,0,0,0,0,0,0],
        9 :[0,0,0,0,0,0,0,0,0,0],
        10:[0,0,0,0,0,0,0,0,0,0],
        11:[0,0,0,0,0,0,0,0,0,0],
        12:[0,0,0,0,0,0,0,0,0,0],
        13:[0,0,0,0,0,0,0,0,0,0],
        14:[0,0,0,0,0,0,0,0,0,0],
        15:[0,0,0,0,0,0,0,0,0,0],
        16:[0,0,0,0,0,0,0,0,0,0],
        17:[0,0,0,0,0,0,0,0,0,0],
        18:[0,0,0,0,0,0,0,0,0,0],
        19:[0,0,0,0,0,0,0,0,0,0],
        20:[0,0,0,0,0,0,0,0,0,0],
        21:[0,0,0,0,0,0,0,0,0,0]}

Block_Ligne = {0 : { 0 : [1],
                     1 : [1],
                     2 : [1],
                     3 : [1]},

               1 : { 0 : [1,1,1,1]},

               2 : { 0 : [1],
                     1 : [1],
                     2 : [1],
                     3 : [1]},

               3 : {0 : [1,1,1,1]}}

Block_Tee =   {0 : { 0 : [-1, 2,-1],
                     1 : [ 2, 2, 2]},

               1 : { 0 : [-1,2],
                     1 : [ 2, 2],
                     2 : [-1, 2]},

               2 : { 0 : [ 2, 2, 2],
                     1 : [-1, 2,-1]},

               3 : { 0 : [ 2,-1],
                     1 : [ 2, 2],
                     2 : [ 2,-1]}}

Block_S1 =    {0 : {0 : [ 3, 3,-1],
                    1 : [-1, 3, 3]},

               1 : {0 : [-1, 3],
                    1 : [ 3, 3],
                    2 : [ 3,-1]},

               2 : {0 : [ 3, 3,-1],
                    1 : [-1, 3, 3]},

               3 : {0 : [-1, 3],
                    1 : [ 3, 3],
                    2 : [ 3,-1]}}

Block_S2 =      {0 : {0 : [-1, 4, 4],
                      1 : [ 4, 4,-1]},

                 1 : {0 : [ 4,-1],
                      1 : [ 4, 4],
                      2 : [-1, 4]},

                 2 : {0 : [-1, 4, 4],
                      1 : [ 4, 4,-1]},

                 3 : {0 : [ 4,-1],
                      1 : [ 4, 4],
                      2 : [-1, 4]}}

Block_Cube =   {0 : {0 : [5,5],
                     1 : [5,5]},

                1 : {0 : [5,5],
                     1 : [5,5]},

                2 : {0 : [5,5],
                     1 : [5,5]},

                3 : {0 : [5,5],
                     1 : [5,5]}}

Block_L1=      { 0 : {0 : [ 6,6],
                      1 : [-1,6],
                      2 : [-1,6]},

                 1 : {0 : [ 6, 6, 6],
                      1 : [ 6,-1,-1]},

                 2 : {0 : [-1,6],
                      1 : [-1,6],
                      2 : [ 6,6]},

                 3 : {0 : [-1,-1,6],
                      1 : [ 6, 6,6]}}

Block_L2=      { 0 : {0 : [ 7, 7],
                      1 : [ 7,-1],
                      2 : [ 7,-1]},

                 1 : {0 : [ 7,-1,-1],
                      1 : [ 7, 7, 7]},

                 2 : {0 : [-1, 7],
                      1 : [-1, 7],
                      2 : [ 7, 7]},

                 3 : {0 : [ 7, 7, 7],
                      1 : [-1,-1, 7]}}

def main_prog():
    my_server = MyServer(localaddr = (sys.argv[1],int(sys.argv[2])))
    while True:
        my_server.Pump()
        time.sleep(0.01)

if __name__ == '__main__':
    main_prog()
    sys.exit(0)
